on:
 push:
   branches:
     - main

jobs:
 Pages:
   runs-on: ubuntu-latest
   steps:
     - uses: actions/checkout@v4

     - name: Set Key
       run: |
         mkdir -p ~/.ssh
         cat > ~/.ssh/id_rsa <<EOF
         ${{ secrets.ACTION }}
         EOF
         ssh-keyscan github.com >> ~/.ssh/known_hosts # Not need for GitHub
         git config --global user.name "${GITHUB_ACTOR}"
         git config --global user.email "${GITHUB_ACTOR_ID}+${GITHUB_ACTOR}@users.noreply.github.com"
         chmod 700 ~/.ssh/id_rsa
         ssh -T git@github.com || true

         git remote add Pages ssh://[git@github.com:22]:Oniicyan/Pages
         curl -LOs https://raw.githubusercontent.com/PBH-BTN/BTN-Collected-Rules/main/combine/all.txt
         git add all.txt
         # git add IPLIST.zip
         git commit -m "Update IPLIST Archive" || true
         git push Pages
